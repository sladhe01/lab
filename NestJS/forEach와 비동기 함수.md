forEach는 콜백함수로 비동기 함수를 써줘도 비동기 함수가 다 처리될 때 까지 대기하지를 않기때문에 이런 경우에는 map으로 배열을 받아 Promise.all()로 배열을 처리해주는 것이 좋다.